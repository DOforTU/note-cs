# 05. Hash

Hash는 데이터를 빠르게 저장하고 검색할 수 있도록 도와주는 자료구조이다. **키(key)** 를 **해시 함수(hash function)** 에 넣으면 **해시값(hash value)** 이라는 숫자가 나오고, 이 숫자를 이용해 데이터를 저장할 위치를 결정한다. 배열처럼 인덱스를 활용하기 때문에 평균적으로 $O(1)$ 시간에 데이터를 저장하거나 찾을 수 있다.

하지만 서로 다른 키가 같은 위치를 가리키는 경우가 발생할 수 있다. 이를 **해시 충돌(hash collision)** 이라고 하며, 이를 처리하는 방식에 따라 Open Addressing과 Closed Addressing(Chaining)으로 나뉜다.

## 5.1 Open Addressing

Open Addressing은 충돌이 발생했을 때 **다른 빈 자리를 찾아 데이터를 저장하는 방식**이다. 하나의 배열 안에서만 데이터를 저장하며, 충돌이 나면 순서나 규칙에 따라 새로운 위치를 탐색한다.

### 5.1.1 Linear Probing

Linear Probing은 충돌이 발생했을 때 **다음 칸, 그다음 칸으로 한 칸씩 이동하며** 빈 자리를 찾는 방식이다.

예를 들어, 어떤 키를 해시했더니 인덱스 3이 나왔고, 거기에 이미 다른 값이 있다면 4, 5, 6번 인덱스를 차례로 확인하여 빈 공간을 찾는다.

- 장점: 구현이 간단하고 캐시 적중률이 높다.
    
- 단점: **클러스터링(clustering)** 현상이 생길 수 있다. 즉, 연속된 공간에 데이터가 몰려서 탐색 성능이 떨어질 수 있다.
    

### 5.1.2 Quadratic Probing

Quadratic Probing은 충돌 시 한 칸씩 가지 않고, **$1^2, 2^2, 3^2, \dots$ 만큼 떨어진 칸**을 순서대로 확인한다. 예를 들어, 원래 인덱스가 $h$라면, $h + 1^2$, $h + 2^2$, $h + 3^2$처럼 점점 멀어지는 위치를 본다.

- 장점: 클러스터링 현상이 줄어든다.
    
- 단점: 적절한 테이블 크기 설정이 필요하며, 여전히 충돌을 완전히 피할 수는 없다.
    

### 5.1.3 Random Probing

Random Probing은 충돌이 발생했을 때 **일정한 규칙이 아닌 무작위로 선택한 거리**만큼 떨어진 위치를 탐색한다. 보통 난수 생성기를 이용해 이동 거리를 결정한다.

- 장점: 예측 가능한 패턴이 없기 때문에 충돌 분산이 잘 된다.
    
- 단점: 구현이 복잡하고, 같은 키에 대해 항상 같은 순서로 탐색하려면 난수 시드를 고정해야 한다.
    

### 5.1.4 Double Hashing

Double Hashing은 **두 개의 해시 함수를 사용하는 방식**이다. 첫 번째 해시 함수로 기본 위치를 정하고, 두 번째 해시 함수로 충돌 시 이동할 간격을 결정한다. 예를 들어, 이동 거리가 $h_2(key)$라면 $h_1(key) + i \cdot h_2(key)$ 식으로 새로운 위치를 찾는다.

- 장점: 충돌 분산이 뛰어나고, 클러스터링도 최소화된다.
    
- 단점: 두 개의 해시 함수를 설계해야 하며, 구현이 약간 더 복잡하다.
    

## 5.2 Closed Addressing: Chaining

Closed Addressing, 또는 Chaining은 충돌이 발생했을 때, **같은 인덱스에 여러 개의 값을 연결 리스트 형태로 저장하는 방식**이다. 즉, 해시 테이블의 각 칸이 연결 리스트(또는 다른 자료구조)의 시작점이 된다.

예를 들어, 어떤 키를 해시했더니 인덱스 5가 나왔고, 거기에 이미 다른 값이 있다면, 그 자리에 연결 리스트를 만들어서 새 데이터를 뒤에 추가한다.

- 장점:
    
    - 충돌이 많아도 계속 데이터를 저장할 수 있다.
        
    - 해시 테이블이 꽉 차는 문제가 없으며, 삭제 연산이 간단하다.
        
- 단점:
    
    - 연결 리스트 탐색에 시간이 걸릴 수 있다.
        
    - 메모리를 추가로 사용해야 하며, 캐시 효율이 떨어진다.
        

Chaining 방식은 구현이 직관적이고 유연성이 높아, 대부분의 프로그래밍 언어에서 해시 테이블을 구현할 때 많이 사용된다. 예를 들어, 파이썬의 `dict`, 자바의 `HashMap` 등도 내부적으로 Chaining 방식을 기반으로 한다.